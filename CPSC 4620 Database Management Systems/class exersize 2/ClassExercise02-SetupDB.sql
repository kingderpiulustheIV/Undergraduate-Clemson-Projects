/* Chapter 7 Lab Activities */

DROP SCHEMA IF EXISTS InstantRide;
CREATE SCHEMA InstantRide;
USE InstantRide;

DROP USER IF EXISTS 'dbtester';
CREATE USER 'dbtester' IDENTIFIED BY 'CPSC4620'; 
GRANT ALL ON InstantRide.* TO 'dbtester';

CREATE TABLE DRIVERS
(
    DRIVER_ID CHAR(5) PRIMARY KEY NOT NULL,
    DRIVER_FIRST_NAME VARCHAR(20) NOT NULL,
    DRIVER_LAST_NAME VARCHAR(20) NOT NULL,
    DRIVER_DRIVING_LICENSE_ID VARCHAR(10) NOT NULL,
    DRIVER_START_DATE DATE NOT NULL,
    DRIVER_DRIVING_LICENSE_CHECKED BOOL NOT NULL,
    DRIVER_RATING DECIMAL(2, 1) NOT NULL
);

INSERT INTO DRIVERS
VALUES('2001', 'Willie', 'Butler', '1874501', '2022-09-12', true, 4.4 );
INSERT INTO DRIVERS
VALUES('2002', 'Justin', 'Howard', '1953853', '2022-09-09', true, 4.8);
INSERT INTO DRIVERS
VALUES('2003', 'Anthony', 'Walker', '1735487', '2022-09-15', true, 3.5);
INSERT INTO DRIVERS
VALUES('2004', 'Ece', 'Yilmaz', '1734747', '2022-08-15', true, 0);

CREATE TABLE CARS
(
    CAR_ID CHAR(5) PRIMARY KEY NOT NULL,
    CAR_PLATE VARCHAR(10) NOT NULL,
    CAR_MODEL VARCHAR(20) NOT NULL,
    CAR_YEAR YEAR NOT NULL
);

INSERT INTO CARS
VALUES('1001', 'BB-542-AB', 'TOYOTA PRIUS', '2020');
INSERT INTO CARS
VALUES('1002', 'BB-883-EE', 'TESLA MODEL 3', '2021');
INSERT INTO CARS
VALUES('1003', 'BB-451-ZN', 'TOYOTA AURIS', '2021');
INSERT INTO CARS
VALUES('1004', 'BB-189-MM', 'MERCEDES E200', '2021');


CREATE TABLE USERS
(
    USER_ID CHAR(5) PRIMARY KEY NOT NULL,
    USER_FIRST_NAME VARCHAR(20) NOT NULL,
    USER_LAST_NAME VARCHAR(20) NOT NULL,
    USER_EMAIL VARCHAR(100) NOT NULL
);

INSERT INTO USERS
VALUES('3001', 'Jack', 'Hill', 'j.hill@xmail.com');
INSERT INTO USERS
VALUES('3002', 'Ryan', 'Collins', 'r.collins@xmail.com');
INSERT INTO USERS
VALUES('3003', 'Nursin', 'Yilmaz', 'n.atak@gmail.com');
INSERT INTO USERS
VALUES('3004', 'Sarah', 'Price', 's.price@xmail.com');
INSERT INTO USERS
VALUES('3005', 'Bobby', 'Griffin', 'b.griffin@xmail.com');
INSERT INTO USERS
VALUES('3006', 'Randy', 'Clark', 'r.clark@xmail.com');
INSERT INTO USERS
VALUES('3007', 'Jose', 'Thomas', 'j.thomas@xmail.com');
INSERT INTO USERS
VALUES('3008', 'Nursin', 'Yilmaz', 'n.yilmaz@xmail.com');

CREATE TABLE TRAVELS
(
    TRAVEL_ID CHAR(10) PRIMARY KEY NOT NULL,
    TRAVEL_START_TIME DATETIME NOT NULL,
    TRAVEL_END_TIME DATETIME NOT NULL,
    TRAVEL_START_LOCATION CHAR(30) NOT NULL,
    TRAVEL_END_LOCATION CHAR(30) NOT NULL,
    TRAVEL_PRICE DECIMAL(5 , 2 ) NOT NULL,
    DRIVER_ID CHAR(5) NOT NULL,
    CAR_ID CHAR(5) NOT NULL,
    USER_ID CHAR(5) NOT NULL,
    TRAVEL_DISCOUNT DECIMAL(3 , 2 ),
	CONSTRAINT FOREIGN KEY (DRIVER_ID) REFERENCES DRIVERS(DRIVER_ID),
	CONSTRAINT FOREIGN KEY (CAR_ID) REFERENCES CARS(CAR_ID),
	CONSTRAINT FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID)
);

INSERT INTO TRAVELS
VALUES('5001', '2022-10-01 04:04:55', '2022-10-01 04:14:19', '9614 York Road', '84 Church Lane', '15.44', '2001', '1003', '3005', NULL);
INSERT INTO TRAVELS
VALUES('5002', '2022-10-01 05:57:33', '2022-10-01 06:12:33', '47 Church Street', '68 High Street', '20.56', '2001', '1003', '3006', NULL);
INSERT INTO TRAVELS
VALUES('5003', '2022-10-01 13:35:20', '2022-10-01 13:45:10', '2 Windsor Road', '95 West Street', '12.32', '2002', '1001', '3002', NULL);
INSERT INTO TRAVELS
VALUES('5004', '2022-10-02 08:44:48', '2022-10-02 09:15:28', '9060 Mill Lane', '27 Main Road', '30.49', '2003', '1002', '3001', '0.13');
INSERT INTO TRAVELS
VALUES('5005', '2022-10-02 16:38:54', '2022-10-02 16:48:10', '2 Queensway', '24 Mill Lane', '11.15', '2001', '1003', '3007', NULL);
INSERT INTO TRAVELS
VALUES('5006', '2022-10-03 19:12:14', '2022-10-03 19:23:45', '50 Main Road', '93 Broadway', '14.61', '2003', '1002', '3007', '0.1');
INSERT INTO TRAVELS
VALUES('5007', '2022-10-03 16:06:36', '2022-10-03 16:08:56', '39 Park Road', '91 West Street', '4.41', '2002', '1004', '3003', '0.14');
INSERT INTO TRAVELS
VALUES('5008', '2022-10-03 17:17:12', '2022-10-03 17:37:42', '37 The Drive', '17 Stanley Road', '25.12', '2001', '1003', '3001', '0.25');
INSERT INTO TRAVELS
VALUES('5009', '2022-10-03 21:16:48', '2022-10-03 21:26:18', '77 Mill Road', '724 Springfield Road', '13.55', '2001', '1003', '3005', NULL);
INSERT INTO TRAVELS
VALUES('5010', '2022-10-03 23:21:40', '2022-10-03 23:39:10', '16 Church Road', '30 North Road', '25.62', '2003', '1002', '3003', '0.2');